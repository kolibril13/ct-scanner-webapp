<html>

<head>

    <title>CT Scanner</title>
    <link rel="icon" type="image/svg+xml" href="icon_bone.svg">

    <!--
    Import tailwind js to dnyamical add styleing to tailwind classes
    "Not the best choice for production" says Tailwind, but will do for now 
    -->
    <script src="https://cdn.tailwindcss.com/"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="./drag_drop.css">
    <style>
        .external_link_section {
            position: absolute;
            top: 15px;
            right: 15px;
        }

        a:link {
            color: black;
            background-color: transparent;
            text-decoration: none;
        }

        a:visited {
            color: black;
            background-color: transparent;
            text-decoration: none;
        }

        a:hover {
            color: grey;
            background-color: transparent;
            text-decoration: underline;
        }

        a:active {
            color: blue;
            background-color: transparent;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/compare_view@1.3.4/public/dist/browser_compare_view.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/compare_view@1.3.4/public/dist/drag_drop.js"></script>
    <py-env>
        - Pillow
        - matplotlib
        - scikit-image
        - numpy
    </py-env>
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-script src="./emoji_playground.py">
    </py-script>

    <div class="external_link_section">
        <a title="Link zum GitHub Projekt" href="https://github.com/kolibril13/ct-scanner-webapp"><i
                class="fa fa-github" style='font-size:36px;'></i></a>
    </div>

    <br>
    <h1 class="font-medium leading-tight text-5xl mt-0 mb-2">Der CT Scanner zum Ausprobieren</h1>

    <div class="p-2 bg-green-50 m-8 border-2">

        <div class="flex flex-row space-x-12">
            <div class="grid grid-cols-2">
                <p class="">Wähle ein Emoji:</p>
                <select id="emoji-selector">
                    <option value="🦴">🦴</option>
                    <option value="🐶">🐶</option>
                    <option value="🐱">🐱</option>
                    <option value="🦚">🦚</option>
                    <option value="🎭">🎭</option>

                </select>
            </div>
            <div class="grid grid-cols-2">
                <p class="">Wähle eine Scan Option:</p>
                <select id="filter-selector">
                    <option value="nur_2_bilder">Nur 2 Bilder</option>
                    <option value="nur_4_bilder">Nur 4 Bilder</option>
                    <option value="nur_8_bilder">Nur 8 Bilder</option>
                    <option value="jedes_10ste_Bild">Nur 30 Bilder</option>
                    <!-- <option value="jedes_5te_Bild">Jedes 5te Bild</option> -->
                    <option value="good_tomo">Vollständig: 309 Bilder</option>
                    <option value="without_fbp">Vollständig, aber ungefiltert</option>
                    <option value="m0to10">Winkel 0° - 10° fehlen</option>
                    <option value="m0to30">Winkel 0° - 30° fehlen</option>
                    <option value="m30to60">Winkel 30° - 60° fehlen</option>
                    <option value="m130to160">Winkel 130° - 160° fehlen</option>
                    <!-- <option value="m0to90">Winkel 0° bis 90° fehlen</option> -->
                    <!-- <option value="m90to180">Winkel 90° bis 180° fehlen</option> -->
                </select>
            </div>
        </div>
    </div>
    <div class="p-2 bg-green-50 m-8 border-2">
        <div id="images" class="flex flex-col w-auto space-x-4 border-green-300 divide-x-2 md:flex-row">
            <div class="grow">
                <p class="w-full text-lg font-semibold text-center underline">Original</p>
                <div id="original_image" class="justify-center flex" style="height: 500;"> </div>
            </div>
            <div class="grow">
                <p class="w-full text-lg font-semibold text-center underline">Tomographie vom Emoji</p>
                <div id="new_image" class="justify-center flex " style="height: 500;"></div>
            </div>
            <div class="grow">
                <p class="w-full text-lg font-semibold text-center underline">Bilder Vergleichen</p>
                <div class="justify-center flex" style="height: 500;">
                    <canvas class="w-auto" id="canvas"></canvas>
                </div>
            </div>
        </div>
    </div>

    Auf der linken Seite ist ein Original Emoji zu sehen, auf der rechten Seite ein CT Scan vom Emoji.
    <br>
    Was passiert, wenn der Scanner nur 2 Bilder, statt allen 309 Bilder aufnimmt?
    <br>
    Was passiert, wenn bestimmte Winkel beim Scan verdeckt worden sind, und somit nicht alle Bilder aufgenommen werden
    konnten?
    <br>
    Mit den Scan-Optionen können verschiedene Szenarios ausprobiert werden.
    <br>

    Um Bilder zu vergleichen, Bilder nach hier ziehen:
    <div class="drag_targets">
        <div class="drag_target">
            <div>Drag&amp;Drop für 1. Bild</div>
        </div>
        <div class="drag_target">
            <div>Drag&amp;Drop für 2. Bild</div>
        </div>
    </div>

    <script>
        compare_view.load(
            [
                "./empty.png",
                "./empty.png",
            ],
            "canvas",
            {
                start_mode: "horizontal",
            },
            (cvd) => {
                drag_drop.load(
                    "drag_target",
                    "./empty.png",
                    (image_urls) => {
                        compare_view.load_new_imgs(cvd, image_urls);
                    },
                );
            },
        );
    </script>
</body>

</html>